<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UB Liv'Link Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css"> 
    
    </head>
<body class="uba-dashboard">
    <div class="uba-wrapper">
        
        <aside class="uba-sidebar">
            <div class="uba-logo-container">
                <img src="unnamed.png" alt="UB Liv'Link Logo">
                <div class="uba-app-name">UB Housing Admin</div>
            </div>
            <nav class="uba-nav-menu">
                <a href="#uba-overview" class="uba-nav-item active">üè† Overview</a>
                <a href="#uba-verification-queue" class="uba-nav-item">‚úÖ Verification Queue</a>
                <a href="#uba-verification-report" class="uba-nav-item">üìä Verification Report</a>
                <a href="#uba-review-report" class="uba-nav-item">‚ö†Ô∏è Review Report</a>
            </nav>

            <div class="uba-sidebar-footer" style="padding: 15px; border-top: 1px solid #e0e0e0;">
                <button class="uba-logout-btn" id="logout-btn" style="width: 100%; padding: 10px; background-color: #f8f9fa; color: #dc3545; border: 1px solid #dc3545; border-radius: 6px; cursor: pointer; font-weight: 600;">
                    Log Out üö™
                </button>
            </div>
        </aside>

        <main class="uba-content-area">
            
            <section id="uba-overview" class="uba-module active">
                <h2>Admin Dashboard Overview</h2>
                
                <div class="uba-stats-grid">
                    <div class="uba-stat-card primary">
                        <h3>Listings Pending Verification</h3>
                        <p class="uba-stat-number" id="pending-verification-count">--</p>
                    </div>
                    <div class="uba-stat-card accent">
                        <h3>Total Active Listings</h3>
                        <p class="uba-stat-number" id="active-listings-count">--</p>
                    </div>
                    <div class="uba-stat-card primary">
                        <h3>Total Landlord Registrations</h3>
                        <p class="uba-stat-number" id="landlord-count">--</p>
                    </div>
                    <div class="uba-stat-card accent">
                        <h3>Critical Reviews Flagged</h3>
                        <p class="uba-stat-number" id="flagged-reviews-count">--</p>
                    </div>
                </div>
            </section>
            
            <section id="uba-verification-queue" class="uba-module">
                <h2>‚úÖ Listing Verification Queue</h2>
                
                <p style="font-weight: 600; color: #555;">Today's Goal: <span id="verified-count">5</span> / <span id="total-pending">12</span> Listings Verified</p>
                <div class="uba-progress-container">
                    <div id="uba-progress-bar" class="uba-progress-bar" style="width: 42%;"></div>
                </div>

                <div class="uba-verification-table">
                    <div class="uba-table-header">
                        <div>Property & Landlord</div>
                        <div>Date Submitted</div>
                        <div>Status</div>
                        <div>Verification Form</div>
                    </div>
                    
                    <div class="uba-table-row" data-listing-id="LST101" id="row-LST101">
                        <div>The Courtyard, Unit 7 (John Smith)</div>
                        <div>2025-11-12</div>
                        <div class="uba-status uba-status-pending">PENDING</div>
                        <div><button class="uba-action-btn uba-verify-form-btn" data-listing-id="LST101">Open Form</button></div>
                    </div>
                    
                    <div class="uba-table-row" data-listing-id="LST102" id="row-LST102">
                        <div>Campus Heights Apt B (Jane Doe Prop.)</div>
                        <div>2025-11-09</div>
                        <div class="uba-status uba-status-pending">PENDING</div>
                        <div><button class="uba-action-btn uba-verify-form-btn" data-listing-id="LST102">Open Form</button></div>
                    </div>
                </div>

                <!-- Verification Form Section -->
                <div id="uba-verification-form-container" class="uba-verification-form-container" style="display: none;">
                    <div class="uba-verification-form-header">
                        <h3>Verification Form</h3>
                        <button class="uba-close-form-btn">Close</button>
                    </div>
                    <div class="uba-verification-form-content">
                        <form id="uba-verification-form" class="uba-verification-form">
                            <div class="uba-form-group">
                                <label for="uba-listing-id">Listing ID</label>
                                <input type="text" id="uba-listing-id" placeholder="Enter listing ID" required readonly>
                            </div>

                            <div class="uba-form-group">
                                <label for="uba-landlord-name">Landlord Name</label>
                                <input type="text" id="uba-landlord-name" placeholder="Enter landlord's name" required readonly>
                            </div>

                            <div class="uba-form-group">
                                <label for="uba-status">Verification Status</label>
                                <select id="uba-status" required>
                                    <option value="" disabled selected>Select Status</option>
                                    <option value="verified">‚úÖ Verified</option>
                                    <option value="rejected">‚ùå Rejected</option>
                                </select>
                            </div>

                            <div class="uba-form-group">
                                <label for="uba-notes">Notes / Comments</label>
                                <textarea id="uba-notes" placeholder="Add verification notes or reason for rejection..." required></textarea>
                            </div>

                            <div class="uba-form-actions">
                                <button type="submit" class="uba-primary-btn">Submit Verification</button>
                                <button type="button" class="uba-secondary-btn uba-cancel-form-btn">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
            
            <section id="uba-verification-report" class="uba-module">
                <h2>üìä Verification Report</h2>
                
                <div class="uba-report-section">
                    <div class="uba-report-card">
                        <h4>Verification Compliance Overview</h4>
                        <form id="uba-verification-report-form">
                            <div class="uba-form-group">
                                <label for="uba-report-type">Metric:</label>
                                <select id="uba-report-type">
                                    <option>Average Time to Verify (Days)</option>
                                    <option>Rejection Rate by Document Type</option>
                                </select>
                            </div>
                            <div class="uba-form-group">
                                <label for="uba-date-range">Date Range:</label>
                                <input type="text" id="uba-date-range" value="Last 90 Days" placeholder="Last 90 Days">
                            </div>
                            <button type="submit" class="uba-primary-btn">Generate Analytics</button>
                        </form>
                    </div>
                </div>

                <div class="uba-verification-report-table-container">
                    <div class="uba-filter-section">
                        <input type="text" id="uba-search-input" placeholder="Search property name...">
                        <select id="uba-filter-status">
                            <option value="all">All Statuses</option>
                            <option value="verified">Verified</option>
                            <option value="rejected">Rejected</option>
                        </select>
                        <button class="uba-primary-btn" onclick="ubaExportReport()">Export Report</button>
                    </div>

                    <table id="uba-verification-table" class="uba-data-table">
                        <thead>
                            <tr>
                                <th>Property Name</th>
                                <th>Status</th>
                                <th>Verified By</th>
                                <th>Date</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Sunset Apartments</td>
                                <td><span class="uba-status uba-status-verified">Verified</span></td>
                                <td>J. Martinez</td>
                                <td>2025-10-20</td>
                                <td>All documentation complete and accurate.</td>
                            </tr>
                            <tr>
                                <td>Belmont Residences</td>
                                <td><span class="uba-status uba-status-rejected">Rejected</span></td>
                                <td>A. Lopez</td>
                                <td>2025-10-17</td>
                                <td>Missing property ownership proof.</td>
                            </tr>
                            <tr>
                                <td>Oakwood House</td>
                                <td><span class="uba-status uba-status-verified">Verified</span></td>
                                <td>L. Bennett</td>
                                <td>2025-10-15</td>
                                <td>Verified after updated lease submission.</td>
                            </tr>
                            <tr>
                                <td>Hilltop Villas</td>
                                <td><span class="uba-status uba-status-rejected">Rejected</span></td>
                                <td>M. Young</td>
                                <td>2025-10-11</td>
                                <td>Photos inconsistent with listing details.</td>
                            </tr>
                        </tbody>
                    </table>

                    <p class="uba-no-results" id="uba-no-results">No matching records found.</p>
                </div>
            </section>
            
            <section id="uba-review-report" class="uba-module">
                <h2>‚ö†Ô∏è Review Moderation Report</h2>
                <div class="uba-settings-card">
                    <h3 style="color:#dc3545;">AI-Flagged Critical Reviews (<span id="uba-flagged-reviews-count">7</span> Pending)</h3>
                    <form id="uba-review-filter-form">
                        <div class="uba-form-group">
                            <label for="uba-ai-flag">Filter by Critical Flag:</label>
                            <select id="uba-ai-flag">
                                <option>High Severity (Safety/Legal risk)</option>
                                <option>Maintenance Issue Frequency</option>
                                <option>Moderator Action History</option>
                            </select>
                        </div>
                        <button type="submit" class="uba-primary-btn" style="background-color:#dc3545;">Search & Prioritize</button>
                    </form>
                </div>

                <div class="uba-review-report-table-container">
                    <div class="uba-filter-section">
                        <input type="text" id="uba-review-search-input" placeholder="Search property name...">
                        <select id="uba-filter-rating">
                            <option value="all">All Ratings</option>
                            <option value="5">‚≠ê 5 Stars</option>
                            <option value="4">‚≠ê 4 Stars</option>
                            <option value="3">‚≠ê 3 Stars</option>
                            <option value="2">‚≠ê 2 Stars</option>
                            <option value="1">‚≠ê 1 Star</option>
                        </select>
                        <button class="uba-primary-btn" onclick="ubaExportReviewReport()">Export Report</button>
                    </div>

                    <table id="uba-review-table" class="uba-data-table">
                        <thead>
                            <tr>
                                <th>Property Name</th>
                                <th>Average Rating</th>
                                <th>Total Reviews</th>
                                <th>Common Feedback</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Sunset Apartments</td>
                                <td>‚≠ê 4.5</td>
                                <td>12</td>
                                <td>Quiet, clean, and safe area.</td>
                            </tr>
                            <tr>
                                <td>Belmont Residences</td>
                                <td>‚≠ê 3.8</td>
                                <td>9</td>
                                <td>Spacious rooms but slow Wi-Fi.</td>
                            </tr>
                            <tr>
                                <td>Oakwood House</td>
                                <td>‚≠ê 4.9</td>
                                <td>7</td>
                                <td>Very friendly landlord and great amenities.</td>
                            </tr>
                            <tr>
                                <td>Hilltop Villas</td>
                                <td>‚≠ê 2.7</td>
                                <td>5</td>
                                <td>Needs better maintenance and repairs.</td>
                            </tr>
                        </tbody>
                    </table>

                    <p class="uba-no-results" id="uba-review-no-results">No matching properties found.</p>
                </div>

                <div class="uba-review-list" style="margin-top: 20px;">
                    <div class="uba-review-card" style="border-left: 4px solid #dc3545;">
                        <p class="uba-review-meta" style="color:#dc3545; font-weight:700;">HIGH SEVERITY FLAG | Listing: The Courtyard</p>
                        <p class="uba-review-text">"Our heating went out last week and the landlord hasn't responded to the emergency request in 48 hours. This is unsafe."</p>
                        <p class="uba-review-author">‚Äî Student ID 543</p>
                        <button class="uba-action-btn uba-reject-btn" style="background-color:#dc3545; color:white;">Investigate Property</button>
                    </div>
                </div>
            </section>
            
        </main>
    </div>

    <script type="module" src="./script/admin.js"></script>
</body>
</html>